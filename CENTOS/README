TODO: give remote machine a name like "dullon" or something so I don't
keep have to say "remote" and "brighton" (+ mention when complete)

TODO: add disclaimer re these are my experiences AND you should not
follow instructions blindly AND especially not run commands blindly
AND especially not as root. No intentional malicious code, but blindly
running stuff hurts you and other-- botnet

NOTE: any reference to "this directory" or "here" refers to
https://github.com/barrycarter/bcapps/blob/master/CENTOS/

NOTE: during graphical boot, hit ESC to see what system is actually doing

This document describes my attempt to setup a CentOS-7 system the way
I want it with minimal unnecessary daemons running.

I downloaded and installed
%% TODO: fix this -- I dld's maximal but installed minimal
first

%% TODO: install groups like X

% On dullon (machine from which you are installing), add the machine's
IP address to /etc/hosts something like this:

192.168.0.3 brighton

This will let you refer to the machine as "brighton" instead of having
to type out the IP address each time. Of course, make sure you use the
machine's actual IP address, which probably won't be 192.168.0.3 in
your case.

% "ssh root@brighton" to login remotely as root

% OPTIONAL: If you want to move /home and create swapspace on an
encrypted non-boot drive, see "move-root.txt"

% rsync over BCGIT to brighton, since I will use symlinks to get
things in their proper place

: NOTE: in theory, could use scp which is installed by default, but
: too inefficient if /home/user/ already exists on a separate drive

: if this fails "sudo yum install rsync" on brighton and then try again

rsync -Pav user@192.168.0.2:/home/barrycarter/BCGIT /home/user/
: and rsync over my private crontab, one of the few files not in this directory
rsync -Pav user@192.168.0.2:/home/barrycarter/bc-private-crontab /home/user/

%% TODO: generalize above for private files in a dir perhaps?

% OPTIONAL: since I install multiple times, move /var/cache to main 8TB
drive that remains unchanged between reinstalls

: if youve done this once, no need to do it again
mkdir -p /mnt/kemptown/var/
sudo mv /var/cache/ /mnt/kemptown/var/

: if youve done this previously youll need to remove the pristine
: /var/cache on every new install
sudo ln -s /mnt/kemptown/var/cache /var/

% https://wiki.centos.org/AdditionalResources/Repositories has
additional repos, but try to avoid them since they are for lower
versions of CentOS and some break things; the only exception I'm
making is rpmfusion

% Then run the commands in runme.sh

: below SHOULD do everything automatically, but MAY require user intervention

chmod +x /home/user/BCGIT/CENTOS/runme.sh
sudo sh -c '/home/user/BCGIT/CENTOS/runme.sh 1>/runme.out 2>/runme.err'&

% if desired, run "sudo yum -y upgrade", which will upgrade CentOS
itself and many other things; however, it's best to install rpmfusion
packages BEFORE upgrading

% LOOK at /runme.out and /runme.err to see what packages were not
installed, either due to dependencies or because the package was not
available (look for "Skipped (dependency problems):" at the end of
/runme.out)

% These group installs can be done "by hand":

yum groups mark convert

: this lists all groups, even the ones CentOS doesnt "advertise"
yum grouplist hidden

: note my yum install process apparently autoinstalls some groups

: TODO: why are these things groups instead of simple installs?

yum groupinstall "Hardware Monitoring Utilities"

: TODO: below does NOT work, packagelists are empty
yum groupinstall "MySQL Database client" "MySQL Database server"

yum groupinstall "X Window System"

%% TODO: what to do about missing/dependent packages

cd /root/build
curl -LO http://get.videolan.org/vlc/2.2.4/vlc-2.2.4.tar.xz


%% as of https://forum.videolan.org/viewtopic.php?t=135024 confirms no
CentOS 7 packages

%% TODO: attempted kill after boot:

: killing systemd-udevd and systemd-logind works but they come right back
: same with systemd-journald and "agetty"

: TODO: should be able to turn off anacron at a more fundamental level
sudo kill anacron
sudo pkill lvmetad
sudo pkill login
sudo pkill agetty
sudo pkill systemd-tty-ask-password-agent

%% TODO: setup xinetd properly

%% TODO: currently running "sudo dhclient -d" manually at each reboot, fix

% OPTIONAL: "shutdown -r now" to make sure everything comes up fine

% mass install (TODO: combine these later, and also "-y")

%% TODO: note that yum skips over uninstallable packages, but deal with those

%% TODO: copy notes from FEDORA/README as applicable
